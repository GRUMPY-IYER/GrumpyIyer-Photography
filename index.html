<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grumpy Iyer - Photography & Philosophy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>.font-serif{font-family:'Lora',serif}</style>
</head>
<body>
  <div id="root"></div>
  <script type="module">
    import React, { useState, useEffect } from 'https://esm.sh/react@18.2.0';
    import ReactDOM from 'https://esm.sh/react-dom@18.2.0/client';
    import { Heart, ShoppingCart, MessageCircle, X, Menu, Book, Camera, Feather, ChevronLeft, ChevronRight, Edit, Trash2, Plus, Lock, Save } from 'https://esm.sh/lucide-react@0.263.1';

    const PhotoPortfolio = () => {
      const ADMIN_PASSWORD = 'grumpy2024'; // CHANGE THIS PASSWORD!
      
      const initialPhotos = [
        { id: 1, title: "Cheetah on the Serengeti Plains", category: "Wildlife", price: 150, url: "https://images.unsplash.com/photo-1551969014-7d2c4cddf0b6?w=1200", hookLine: "In stillness, the hunter waits", philosophy: "The cheetah embodies witness consciousness - alert, present, yet completely at peace.", likes: 24 },
        { id: 2, title: "Golden Hour Savanna", category: "Landscape", price: 120, url: "https://images.unsplash.com/photo-1516426122078-c23e76319801?w=1200", hookLine: "Where earth meets infinity", philosophy: "The vast savanna reveals the illusion of separation.", likes: 18 }
      ];

      const [isAdmin, setIsAdmin] = useState(false);
      const [adminPassword, setAdminPassword] = useState('');
      const [showAdminLogin, setShowAdminLogin] = useState(false);
      const [photos, setPhotos] = useState(initialPhotos);
      const [currentView, setCurrentView] = useState('gallery');
      const [category, setCategory] = useState('All');
      const [selectedPhoto, setSelectedPhoto] = useState(null);
      const [cart, setCart] = useState([]);
      const [showCart, setShowCart] = useState(false);
      const [showPhotoForm, setShowPhotoForm] = useState(false);
      const [editingPhoto, setEditingPhoto] = useState(null);
      const [photoForm, setPhotoForm] = useState({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' });

      const handleAdminLogin = () => {
        if (adminPassword === ADMIN_PASSWORD) {
          setIsAdmin(true);
          setShowAdminLogin(false);
          setAdminPassword('');
        } else {
          alert('Incorrect password');
        }
      };

      const handlePhotoUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => setPhotoForm({ ...photoForm, url: reader.result });
          reader.readAsDataURL(file);
        }
      };

      const savePhoto = () => {
        if (!photoForm.title || !photoForm.url) return alert('Please fill in all fields');
        if (editingPhoto) {
          setPhotos(photos.map(p => p.id === editingPhoto.id ? { ...photoForm, id: editingPhoto.id, likes: editingPhoto.likes } : p));
        } else {
          setPhotos([...photos, { ...photoForm, id: Date.now(), likes: 0 }]);
        }
        setPhotoForm({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' });
        setShowPhotoForm(false);
        setEditingPhoto(null);
      };

      const editPhoto = (photo) => {
        setEditingPhoto(photo);
        setPhotoForm({ title: photo.title, category: photo.category, price: photo.price, hookLine: photo.hookLine, philosophy: photo.philosophy, url: photo.url });
        setShowPhotoForm(true);
      };

      const deletePhoto = (id) => {
        if (confirm('Delete this photo?')) setPhotos(photos.filter(p => p.id !== id));
      };

      const addToCart = (photo) => {
        const existing = cart.find(item => item.id === photo.id);
        if (existing) {
          setCart(cart.map(item => item.id === photo.id ? { ...item, quantity: item.quantity + 1 } : item));
        } else {
          setCart([...cart, { ...photo, quantity: 1 }]);
        }
      };

      const filteredPhotos = category === 'All' ? photos : photos.filter(p => p.category === category);

      return (
        <div className="min-h-screen bg-stone-50">
          {/* Header */}
          <header className="bg-white border-b border-stone-200 sticky top-0 z-40 shadow-sm">
            <div className="max-w-7xl mx-auto px-4 py-4">
              <div className="flex items-center justify-between">
                <div className="flex items-center gap-3">
                  <div className="w-10 h-10 bg-amber-800 rounded-full flex items-center justify-center">
                    <span className="text-white font-serif text-lg">GI</span>
                  </div>
                  <div>
                    <h1 className="text-2xl font-serif text-stone-800">Grumpy Iyer</h1>
                    <p className="text-xs text-stone-500">Photography & Philosophy</p>
                  </div>
                </div>
                <nav className="flex items-center gap-4">
                  <button onClick={() => setCurrentView('gallery')} className={currentView === 'gallery' ? 'text-amber-800' : 'text-stone-600'}>Gallery</button>
                  {isAdmin && <button onClick={() => setCurrentView('admin')} className={currentView === 'admin' ? 'text-amber-800' : 'text-stone-600'}>Admin</button>}
                  {!isAdmin && <button onClick={() => setShowAdminLogin(true)}><Lock size={18} /></button>}
                  <button onClick={() => setShowCart(true)} className="relative">
                    <ShoppingCart size={20} />
                    {cart.length > 0 && <span className="absolute -top-1 -right-1 bg-amber-800 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">{cart.length}</span>}
                  </button>
                </nav>
              </div>
            </div>
          </header>

          {/* Gallery */}
          {currentView === 'gallery' && (
            <div className="max-w-7xl mx-auto px-4 py-8">
              <div className="flex gap-2 mb-8">
                {['All', 'Wildlife', 'Landscape'].map(cat => (
                  <button key={cat} onClick={() => setCategory(cat)} className={`px-4 py-2 rounded-full ${category === cat ? 'bg-amber-800 text-white' : 'bg-white text-stone-700'}`}>{cat}</button>
                ))}
              </div>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {filteredPhotos.map(photo => (
                  <div key={photo.id} className="group cursor-pointer" onClick={() => setSelectedPhoto(photo)}>
                    <div className="relative overflow-hidden bg-white shadow-md hover:shadow-xl transition">
                      <img src={photo.url} alt={photo.title} className="w-full aspect-[4/3] object-cover group-hover:scale-105 transition" />
                      <div className="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent opacity-0 group-hover:opacity-100 transition">
                        <p className="absolute bottom-4 left-4 text-white text-sm italic">{photo.hookLine}</p>
                      </div>
                    </div>
                    <div className="mt-4">
                      <h3 className="font-serif text-lg">{photo.title}</h3>
                      <div className="flex justify-between text-sm">
                        <span className="text-stone-500">{photo.category}</span>
                        <span className="text-amber-800 font-medium">${photo.price}</span>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* Admin Panel */}
          {currentView === 'admin' && isAdmin && (
            <div className="max-w-7xl mx-auto px-4 py-12">
              <div className="flex justify-between mb-8">
                <h2 className="text-4xl font-serif">Admin Panel</h2>
                <button onClick={() => setIsAdmin(false)} className="px-4 py-2 bg-stone-200 rounded-lg">Logout</button>
              </div>
              <div className="bg-white rounded-lg shadow-md p-6">
                <div className="flex justify-between mb-6">
                  <h3 className="text-2xl font-serif">Manage Photos</h3>
                  <button onClick={() => { setEditingPhoto(null); setPhotoForm({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' }); setShowPhotoForm(true); }} className="flex items-center gap-2 bg-amber-800 text-white px-4 py-2 rounded-lg">
                    <Plus size={18} /> Add Photo
                  </button>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  {photos.map(photo => (
                    <div key={photo.id} className="bg-stone-50 rounded-lg overflow-hidden">
                      <img src={photo.url} alt={photo.title} className="w-full h-48 object-cover" />
                      <div className="p-4">
                        <h4 className="font-serif mb-2">{photo.title}</h4>
                        <p className="text-sm text-stone-600 mb-3">{photo.category} Â· ${photo.price}</p>
                        <div className="flex gap-2">
                          <button onClick={() => editPhoto(photo)} className="flex-1 bg-blue-600 text-white py-2 rounded">Edit</button>
                          <button onClick={() => deletePhoto(photo.id)} className="flex-1 bg-red-600 text-white py-2 rounded">Delete</button>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}

          {/* Photo Form Modal */}
          {showPhotoForm && (
            <div className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4">
              <div className="bg-white rounded-lg max-w-2xl w-full p-6">
                <div className="flex justify-between mb-6">
                  <h2 className="text-2xl font-serif">{editingPhoto ? 'Edit Photo' : 'Add Photo'}</h2>
                  <button onClick={() => setShowPhotoForm(false)}><X size={24} /></button>
                </div>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium mb-2">Photo Upload</label>
                    <input type="file" accept="image/*" onChange={handlePhotoUpload} className="w-full border rounded-lg px-4 py-2" />
                    {photoForm.url && <img src={photoForm.url} alt="Preview" className="mt-3 w-full h-48 object-cover rounded" />}
                  </div>
                  <input type="text" placeholder="Title" value={photoForm.title} onChange={(e) => setPhotoForm({...photoForm, title: e.target.value})} className="w-full border rounded-lg px-4 py-2" />
                  <div className="grid grid-cols-2 gap-4">
                    <select value={photoForm.category} onChange={(e) => setPhotoForm({...photoForm, category: e.target.value})} className="border rounded-lg px-4 py-2">
                      <option>Wildlife</option>
                      <option>Landscape</option>
                    </select>
                    <input type="number" placeholder="Price" value={photoForm.price} onChange={(e) => setPhotoForm({...photoForm, price: parseInt(e.target.value)})} className="border rounded-lg px-4 py-2" />
                  </div>
                  <input type="text" placeholder="Hook Line" value={photoForm.hookLine} onChange={(e) => setPhotoForm({...photoForm, hookLine: e.target.value})} className="w-full border rounded-lg px-4 py-2" />
                  <textarea placeholder="Philosophy" value={photoForm.philosophy} onChange={(e) => setPhotoForm({...photoForm, philosophy: e.target.value})} rows="5" className="w-full border rounded-lg px-4 py-2" />
                  <button onClick={savePhoto} className="w-full bg-amber-800 text-white py-3 rounded-lg font-medium">Save Photo</button>
                </div>
              </div>
            </div>
          )}

          {/* Admin Login */}
          {showAdminLogin && (
            <div className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4">
              <div className="bg-white rounded-lg max-w-md w-full p-8">
                <div className="flex justify-between mb-6">
                  <h2 className="text-2xl font-serif">Admin Login</h2>
                  <button onClick={() => setShowAdminLogin(false)}><X size={24} /></button>
                </div>
                <input type="password" value={adminPassword} onChange={(e) => setAdminPassword(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleAdminLogin()} placeholder="Enter password" className="w-full border rounded-lg px-4 py-3 mb-4" />
                <button onClick={handleAdminLogin} className="w-full bg-amber-800 text-white py-3 rounded-lg">Login</button>
              </div>
            </div>
          )}

          {/* Photo Detail */}
          {selectedPhoto && (
            <div className="fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4" onClick={() => setSelectedPhoto(null)}>
              <div className="bg-white rounded-lg max-w-5xl w-full" onClick={(e) => e.stopPropagation()}>
                <button onClick={() => setSelectedPhoto(null)} className="absolute top-4 right-4 bg-white p-2 rounded-full"><X size={24} /></button>
                <img src={selectedPhoto.url} alt={selectedPhoto.title} className="w-full h-auto max-h-[60vh] object-contain" />
                <div className="p-8">
                  <p className="text-amber-800 italic text-lg mb-3">{selectedPhoto.hookLine}</p>
                  <h2 className="text-3xl font-serif mb-4">{selectedPhoto.title}</h2>
                  <p className="text-stone-600 mb-6">{selectedPhoto.philosophy}</p>
                  <div className="flex justify-between items-center border-t pt-6">
                    <span className="text-2xl font-serif text-amber-800">${selectedPhoto.price}</span>
                    <button onClick={() => { addToCart(selectedPhoto); setSelectedPhoto(null); }} className="bg-amber-800 text-white px-6 py-3 rounded-lg">Add to Cart</button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Shopping Cart */}
          {showCart && (
            <div className="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4">
              <div className="bg-white rounded-lg max-w-2xl w-full p-6">
                <div className="flex justify-between mb-6">
                  <h2 className="text-2xl font-serif">Shopping Cart</h2>
                  <button onClick={() => setShowCart(false)}><X size={24} /></button>
                </div>
                {cart.length === 0 ? (
                  <div className="text-center py-12 text-stone-400">
                    <ShoppingCart size={48} className="mx-auto mb-4 opacity-50" />
                    <p>Your cart is empty</p>
                  </div>
                ) : (
                  <div>
                    {cart.map(item => (
                      <div key={item.id} className="flex gap-4 bg-stone-50 rounded-lg p-4 mb-4">
                        <img src={item.url} alt={item.title} className="w-24 h-24 object-cover rounded" />
                        <div className="flex-1">
                          <h3 className="font-serif text-lg">{item.title}</h3>
                          <p className="text-sm text-stone-500">{item.category}</p>
                          <span className="font-medium">${item.price * item.quantity}</span>
                        </div>
                      </div>
                    ))}
                    <div className="border-t pt-4">
                      <div className="flex justify-between text-xl font-serif mb-4">
                        <span>Total:</span>
                        <span className="text-amber-800">${cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)}</span>
                      </div>
                      <button onClick={() => { alert('Payment would process here!'); setCart([]); setShowCart(false); }} className="w-full bg-amber-800 text-white py-3 rounded-lg">Checkout</button>
                    </div>
                  </div>
                )}
              </div>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(React.createElement(PhotoPortfolio));
  </script>
</body>
</html>