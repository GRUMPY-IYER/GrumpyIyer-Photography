<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grumpy Iyer - Photography & Philosophy</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    .font-serif { font-family: 'Lora', serif; }
    body { margin: 0; padding: 0; }
  </style>
</head>
<body>
  <div id="root">
    <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; background: #fafaf9;">
      <p style="color: #78350f; font-size: 18px;">Loading...</p>
    </div>
  </div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  
  <script>
    const { useState, useEffect, createElement: h } = React;
    const { createRoot } = ReactDOM;
    const { Heart, ShoppingCart, MessageCircle, X, Menu, Book, Camera, Feather, Lock, Plus, Edit, Trash2, Save } = lucide;

    function PhotoPortfolio() {
      const ADMIN_PASSWORD = 'grumpy2024';
      
      const initialPhotos = [
        { id: 1, title: "Cheetah on the Serengeti Plains", category: "Wildlife", price: 150, url: "https://images.unsplash.com/photo-1551969014-7d2c4cddf0b6?w=1200", hookLine: "In stillness, the hunter waits", philosophy: "The cheetah embodies witness consciousness - alert, present, yet completely at peace. It does not question its nature or resist the moment.", likes: 24 },
        { id: 2, title: "Golden Hour Savanna", category: "Landscape", price: 120, url: "https://images.unsplash.com/photo-1516426122078-c23e76319801?w=1200", hookLine: "Where earth meets infinity", philosophy: "The vast savanna reveals the illusion of separation. Sky and land merge in golden light.", likes: 18 }
      ];

      const [isAdmin, setIsAdmin] = useState(false);
      const [adminPassword, setAdminPassword] = useState('');
      const [showAdminLogin, setShowAdminLogin] = useState(false);
      const [photos, setPhotos] = useState(initialPhotos);
      const [currentView, setCurrentView] = useState('gallery');
      const [category, setCategory] = useState('All');
      const [selectedPhoto, setSelectedPhoto] = useState(null);
      const [cart, setCart] = useState([]);
      const [showCart, setShowCart] = useState(false);
      const [showPhotoForm, setShowPhotoForm] = useState(false);
      const [editingPhoto, setEditingPhoto] = useState(null);
      const [photoForm, setPhotoForm] = useState({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' });

      const handleAdminLogin = () => {
        if (adminPassword === ADMIN_PASSWORD) {
          setIsAdmin(true);
          setShowAdminLogin(false);
          setAdminPassword('');
        } else {
          alert('Incorrect password');
        }
      };

      const handlePhotoUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => setPhotoForm({ ...photoForm, url: reader.result });
          reader.readAsDataURL(file);
        }
      };

      const savePhoto = () => {
        if (!photoForm.title || !photoForm.url) return alert('Please fill in all fields');
        if (editingPhoto) {
          setPhotos(photos.map(p => p.id === editingPhoto.id ? { ...photoForm, id: editingPhoto.id, likes: editingPhoto.likes } : p));
        } else {
          setPhotos([...photos, { ...photoForm, id: Date.now(), likes: 0 }]);
        }
        setPhotoForm({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' });
        setShowPhotoForm(false);
        setEditingPhoto(null);
      };

      const editPhoto = (photo) => {
        setEditingPhoto(photo);
        setPhotoForm({ title: photo.title, category: photo.category, price: photo.price, hookLine: photo.hookLine, philosophy: photo.philosophy, url: photo.url });
        setShowPhotoForm(true);
      };

      const deletePhoto = (id) => {
        if (confirm('Delete this photo?')) setPhotos(photos.filter(p => p.id !== id));
      };

      const addToCart = (photo) => {
        const existing = cart.find(item => item.id === photo.id);
        if (existing) {
          setCart(cart.map(item => item.id === photo.id ? { ...item, quantity: item.quantity + 1 } : item));
        } else {
          setCart([...cart, { ...photo, quantity: 1 }]);
        }
      };

      const filteredPhotos = category === 'All' ? photos : photos.filter(p => p.category === category);
      const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

      return h('div', { className: 'min-h-screen bg-stone-50' },
        // Header
        h('header', { className: 'bg-white border-b border-stone-200 sticky top-0 z-40 shadow-sm' },
          h('div', { className: 'max-w-7xl mx-auto px-4 py-4' },
            h('div', { className: 'flex items-center justify-between' },
              h('div', { className: 'flex items-center gap-3' },
                h('div', { className: 'w-10 h-10 bg-amber-800 rounded-full flex items-center justify-center' },
                  h('span', { className: 'text-white font-serif text-lg' }, 'GI')
                ),
                h('div', null,
                  h('h1', { className: 'text-2xl font-serif text-stone-800' }, 'Grumpy Iyer'),
                  h('p', { className: 'text-xs text-stone-500' }, 'Photography & Philosophy')
                )
              ),
              h('nav', { className: 'flex items-center gap-4' },
                h('button', { onClick: () => setCurrentView('gallery'), className: currentView === 'gallery' ? 'text-amber-800' : 'text-stone-600' }, 'Gallery'),
                isAdmin && h('button', { onClick: () => setCurrentView('admin'), className: currentView === 'admin' ? 'text-amber-800' : 'text-stone-600' }, 'Admin'),
                !isAdmin && h('button', { onClick: () => setShowAdminLogin(true) }, h(Lock, { size: 18 })),
                h('button', { onClick: () => setShowCart(true), className: 'relative' },
                  h(ShoppingCart, { size: 20 }),
                  cart.length > 0 && h('span', { className: 'absolute -top-1 -right-1 bg-amber-800 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center' }, cart.length)
                )
              )
            )
          )
        ),

        // Gallery View
        currentView === 'gallery' && h('div', { className: 'max-w-7xl mx-auto px-4 py-8' },
          h('div', { className: 'flex gap-2 mb-8' },
            ['All', 'Wildlife', 'Landscape'].map(cat =>
              h('button', {
                key: cat,
                onClick: () => setCategory(cat),
                className: `px-4 py-2 rounded-full text-sm ${category === cat ? 'bg-amber-800 text-white' : 'bg-white text-stone-700 border border-stone-200'}`
              }, cat)
            )
          ),
          h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8' },
            filteredPhotos.map(photo =>
              h('div', { key: photo.id, className: 'group cursor-pointer', onClick: () => setSelectedPhoto(photo) },
                h('div', { className: 'relative overflow-hidden bg-white shadow-md hover:shadow-xl transition' },
                  h('img', { src: photo.url, alt: photo.title, className: 'w-full aspect-[4/3] object-cover group-hover:scale-105 transition' }),
                  h('div', { className: 'absolute inset-0 bg-gradient-to-t from-black/60 via-transparent opacity-0 group-hover:opacity-100 transition' },
                    h('p', { className: 'absolute bottom-4 left-4 text-white text-sm italic' }, photo.hookLine)
                  )
                ),
                h('div', { className: 'mt-4' },
                  h('h3', { className: 'font-serif text-lg text-stone-800' }, photo.title),
                  h('div', { className: 'flex justify-between text-sm' },
                    h('span', { className: 'text-stone-500' }, photo.category),
                    h('span', { className: 'text-amber-800 font-medium' }, '$' + photo.price)
                  )
                )
              )
            )
          )
        ),

        // Admin Panel
        currentView === 'admin' && isAdmin && h('div', { className: 'max-w-7xl mx-auto px-4 py-12' },
          h('div', { className: 'flex justify-between mb-8' },
            h('h2', { className: 'text-4xl font-serif text-stone-800' }, 'Admin Panel'),
            h('button', { onClick: () => { setIsAdmin(false); setCurrentView('gallery'); }, className: 'px-4 py-2 bg-stone-200 rounded-lg' }, 'Logout')
          ),
          h('div', { className: 'bg-white rounded-lg shadow-md p-6' },
            h('div', { className: 'flex justify-between mb-6' },
              h('h3', { className: 'text-2xl font-serif' }, 'Manage Photos'),
              h('button', {
                onClick: () => {
                  setEditingPhoto(null);
                  setPhotoForm({ title: '', category: 'Wildlife', price: 150, hookLine: '', philosophy: '', url: '' });
                  setShowPhotoForm(true);
                },
                className: 'flex items-center gap-2 bg-amber-800 text-white px-4 py-2 rounded-lg'
              },
                h(Plus, { size: 18 }),
                ' Add Photo'
              )
            ),
            h('div', { className: 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4' },
              photos.map(photo =>
                h('div', { key: photo.id, className: 'bg-stone-50 rounded-lg overflow-hidden' },
                  h('img', { src: photo.url, alt: photo.title, className: 'w-full h-48 object-cover' }),
                  h('div', { className: 'p-4' },
                    h('h4', { className: 'font-serif mb-2' }, photo.title),
                    h('p', { className: 'text-sm text-stone-600 mb-3' }, photo.category + ' · $' + photo.price),
                    h('div', { className: 'flex gap-2' },
                      h('button', { onClick: () => editPhoto(photo), className: 'flex-1 bg-blue-600 text-white py-2 rounded' }, 'Edit'),
                      h('button', { onClick: () => deletePhoto(photo.id), className: 'flex-1 bg-red-600 text-white py-2 rounded' }, 'Delete')
                    )
                  )
                )
              )
            )
          )
        ),

        // Photo Form Modal
        showPhotoForm && h('div', { className: 'fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4 overflow-y-auto' },
          h('div', { className: 'bg-white rounded-lg max-w-2xl w-full p-6 my-8' },
            h('div', { className: 'flex justify-between mb-6' },
              h('h2', { className: 'text-2xl font-serif' }, editingPhoto ? 'Edit Photo' : 'Add Photo'),
              h('button', { onClick: () => setShowPhotoForm(false) }, h(X, { size: 24 }))
            ),
            h('div', { className: 'space-y-4' },
              h('div', null,
                h('label', { className: 'block text-sm font-medium mb-2' }, 'Photo Upload'),
                h('input', { type: 'file', accept: 'image/*', onChange: handlePhotoUpload, className: 'w-full border border-stone-300 rounded-lg px-4 py-2' }),
                photoForm.url && h('img', { src: photoForm.url, alt: 'Preview', className: 'mt-3 w-full h-48 object-cover rounded' })
              ),
              h('input', { type: 'text', placeholder: 'Title', value: photoForm.title, onChange: (e) => setPhotoForm({...photoForm, title: e.target.value}), className: 'w-full border border-stone-300 rounded-lg px-4 py-2' }),
              h('div', { className: 'grid grid-cols-2 gap-4' },
                h('select', { value: photoForm.category, onChange: (e) => setPhotoForm({...photoForm, category: e.target.value}), className: 'border border-stone-300 rounded-lg px-4 py-2' },
                  h('option', null, 'Wildlife'),
                  h('option', null, 'Landscape')
                ),
                h('input', { type: 'number', placeholder: 'Price', value: photoForm.price, onChange: (e) => setPhotoForm({...photoForm, price: parseInt(e.target.value)}), className: 'border border-stone-300 rounded-lg px-4 py-2' })
              ),
              h('input', { type: 'text', placeholder: 'Hook Line', value: photoForm.hookLine, onChange: (e) => setPhotoForm({...photoForm, hookLine: e.target.value}), className: 'w-full border border-stone-300 rounded-lg px-4 py-2' }),
              h('textarea', { placeholder: 'Philosophy', value: photoForm.philosophy, onChange: (e) => setPhotoForm({...photoForm, philosophy: e.target.value}), rows: 5, className: 'w-full border border-stone-300 rounded-lg px-4 py-2' }),
              h('button', { onClick: savePhoto, className: 'w-full bg-amber-800 text-white py-3 rounded-lg font-medium' }, 'Save Photo')
            )
          )
        ),

        // Admin Login Modal
        showAdminLogin && h('div', { className: 'fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4' },
          h('div', { className: 'bg-white rounded-lg max-w-md w-full p-8' },
            h('div', { className: 'flex justify-between mb-6' },
              h('h2', { className: 'text-2xl font-serif' }, 'Admin Login'),
              h('button', { onClick: () => setShowAdminLogin(false) }, h(X, { size: 24 }))
            ),
            h('input', { type: 'password', value: adminPassword, onChange: (e) => setAdminPassword(e.target.value), onKeyPress: (e) => e.key === 'Enter' && handleAdminLogin(), placeholder: 'Enter password', className: 'w-full border border-stone-300 rounded-lg px-4 py-3 mb-4' }),
            h('button', { onClick: handleAdminLogin, className: 'w-full bg-amber-800 text-white py-3 rounded-lg' }, 'Login')
          )
        ),

        // Photo Detail Modal
        selectedPhoto && h('div', { className: 'fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4', onClick: () => setSelectedPhoto(null) },
          h('div', { className: 'bg-white rounded-lg max-w-5xl w-full relative', onClick: (e) => e.stopPropagation() },
            h('button', { onClick: () => setSelectedPhoto(null), className: 'absolute top-4 right-4 bg-white p-2 rounded-full z-10' }, h(X, { size: 24 })),
            h('img', { src: selectedPhoto.url, alt: selectedPhoto.title, className: 'w-full h-auto max-h-[60vh] object-contain' }),
            h('div', { className: 'p-8' },
              h('p', { className: 'text-amber-800 italic text-lg mb-3' }, selectedPhoto.hookLine),
              h('h2', { className: 'text-3xl font-serif text-stone-800 mb-4' }, selectedPhoto.title),
              h('p', { className: 'text-stone-600 leading-relaxed mb-6' }, selectedPhoto.philosophy),
              h('div', { className: 'flex justify-between items-center border-t border-stone-200 pt-6' },
                h('span', { className: 'text-2xl font-serif text-amber-800' }, '$' + selectedPhoto.price),
                h('button', { onClick: () => { addToCart(selectedPhoto); setSelectedPhoto(null); }, className: 'bg-amber-800 text-white px-6 py-3 rounded-lg' }, 'Add to Cart')
              )
            )
          )
        ),

        // Shopping Cart Modal
        showCart && h('div', { className: 'fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4' },
          h('div', { className: 'bg-white rounded-lg max-w-2xl w-full p-6' },
            h('div', { className: 'flex justify-between mb-6' },
              h('h2', { className: 'text-2xl font-serif' }, 'Shopping Cart'),
              h('button', { onClick: () => setShowCart(false) }, h(X, { size: 24 }))
            ),
            cart.length === 0 ? h('div', { className: 'text-center py-12 text-stone-400' },
              h(ShoppingCart, { size: 48, className: 'mx-auto mb-4 opacity-50' }),
              h('p', null, 'Your cart is empty')
            ) : h('div', null,
              cart.map(item =>
                h('div', { key: item.id, className: 'flex gap-4 bg-stone-50 rounded-lg p-4 mb-4' },
                  h('img', { src: item.url, alt: item.title, className: 'w-24 h-24 object-cover rounded' }),
                  h('div', { className: 'flex-1' },
                    h('h3', { className: 'font-serif text-lg' }, item.title),
                    h('p', { className: 'text-sm text-stone-500' }, item.category),
                    h('span', { className: 'font-medium' }, '$' + (item.price * item.quantity))
                  )
                )
              ),
              h('div', { className: 'border-t border-stone-200 pt-4' },
                h('div', { className: 'flex justify-between text-xl font-serif mb-4' },
                  h('span', null, 'Total:'),
                  h('span', { className: 'text-amber-800' }, '$' + cartTotal)
                ),
                h('button', { onClick: () => { alert('Payment processing would happen here!'); setCart([]); setShowCart(false); }, className: 'w-full bg-amber-800 text-white py-3 rounded-lg' }, 'Checkout')
              )
            )
          )
        )
      );
    }

    const root = createRoot(document.getElementById('root'));
    root.render(h(PhotoPortfolio));
  </script>
</body>
</html>
